<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> surgutneftgaz акции</title>
        <link rel="stylesheet" href="../main.css">
        <link rel="shortcut icon" href="c:\Users\User\Desktop\web-front\favicon.ico" type="image/x-icon">
        <link rel="icon" href="c:\Users\User\Desktop\web-front\favicon-16x16.png">
        <link rel="icon" href="C:\Users\User\Desktop\web-front\favicon-32x32.png">
        
        <script>
            function showExchange(){
                
                const data = [
                    '23.05.2025', '26.05.2025', '27.05.2025', '28.05.2025',
                   '29.05.2025', '30.05.2025', '02.06.2025', '03.06.2025',
                    '04.06.2025', '05.06.2025'
                ]
                const price = [
                    21.99, 21.39, 21.60, 21.73, 22.11, 22.03,
                    22.12, 22.79, 22.40, 22.45
                ];

                let container = document.getElementById('table-container')
                let table = document.createElement('table');
                table.border = "1";

                let tr = document.createElement('tr');
                let thData = document.createElement('th');
                thData.innerText = 'Дата';
                tr.appendChild(thData);

                let thPrice = document.createElement('th');
                thPrice.innerText = 'Цена';
                tr.appendChild(thPrice);

                let thDifference = document.createElement('th');
                thDifference.innerText = 'Разница';
                tr.appendChild(thDifference);

                table.appendChild(tr);

                let sum = 0;
                let maxPrice = price[0];
                let minPrice = price[0];
                for(let i = 0; i <data.length; i++){
                    let tr = document.createElement('tr');
                    let tdDate = document.createElement('td');
                    tdDate.innerText = data[i];
                    tr.appendChild(tdDate);
                    let tdPrice = document.createElement('td');
                    tdPrice.innerHTML = price[i];
                    tr.appendChild(tdPrice);
                    sum += price[i];
                    if (price[i] > maxPrice) maxPrice = price[i];
                    if (price[i] < minPrice) minPrice = price[i];

                    if(i > 0){
                        let tdDifference = document.createElement('td');
                        tdDifference.innerText = (price[i] - price[i - 1]).toFixed(2);
                        tr.appendChild(tdDifference);
                    }
                    else{
                        let tdDifference = document.createElement('td');
                        tdDifference.innerText = "-";
                        tr.appendChild(tdDifference);
                        }
                    table.appendChild(tr);
                }

                let avarage = sum / price.length;
                avarage = avarage.toFixed(2);

                let detail = document.getElementById('detail');
                detail.innerText = `Среднее значение стоимости акции: ${avarage}\nМаксимальное значение стоимости акции: ${maxPrice}\nМинимальное значение стоимости акции: ${minPrice}`;

                let button = document.querySelector('button');
                button.style.display = 'none';

                container.appendChild(table);
                
            }
            </script>
        

    </head>

    <body>
            <header >
            </header>

            <main>
                <button onclick="showExchange()">Курс акций</button>
                <div  id="table-container"></div>
                <div id="detail"></div>
            </main>

            <footer>
                &copy; Dark knight
            </footer>
    </body>
</html>